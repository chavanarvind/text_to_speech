# 🟣 STEP 1: FORCE PAIR LOGIC FIRST for NLP_LIST_ERP
if "nlp_list_erp" in round_name.lower():
    print("-" * 60)
    print(f"🔄 FORCE PAIR LOGIC FOR ALL REFERENCE PAIRS in {round_name}")

    # 🔥 DEBUG: Check if target pair exists in ERP and TRU
    target_erp_id = "6115990"
    target_tru_id = "PC-046458"

    erp_debug = erp_full[erp_full[ERP_PART_ID] == target_erp_id]
    tru_debug = tru_full[tru_full[TRU_SPEC_ID] == target_tru_id]

    print(f"🔍 ERP rows for {target_erp_id}: {len(erp_debug)}")
    print(f"🔍 TRU rows for {target_tru_id}: {len(tru_debug)}")

    # Save to CSV for inspection
    debug_folder = os.path.join(os.getcwd(), "user_logs")
    os.makedirs(debug_folder, exist_ok=True)
    erp_debug.to_csv(os.path.join(debug_folder, f"erp_debug_{target_erp_id}.csv"), index=False)
    tru_debug.to_csv(os.path.join(debug_folder, f"tru_debug_{target_tru_id}.csv"), index=False)
