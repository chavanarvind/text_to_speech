# --- Updated Pipeline Config Blocks for Step 5 and Step 6 ---

from azureml.data import OutputFileDatasetConfig
from datetime import datetime

# Today's date
today = datetime.today().strftime("%d%m%Y")

# === Step 5 Output: Raw inference per file ===
inference_output = OutputFileDatasetConfig(
    name='inference_file_outputs',
    destination=(default_ds, f"hbom_category_prediction_inference_per_file/hbom_category_prediction_{today}/")
)

# === Step 6 Output: Final merged and deduplicated predictions ===
final_merged_output = OutputFileDatasetConfig(
    name='final_merged_predictions',
    destination=(default_ds, f"hbom_category_prediction/hbom_category_prediction_{today}/")
)

# Then use these variables in the corresponding PythonScriptStep definitions:
# inference_step and finalize_output_step respectively.

# Example usage in PythonScriptStep:
# PythonScriptStep(..., outputs=[inference_output], ...)
# PythonScriptStep(..., outputs=[final_merged_output], ...)
