step4 = PythonScriptStep(
    name="Step 4 - Merge Inference Results with Key Files",
    script_name="step_4_merge_with_key_files.py",
    source_directory="scripts",
    arguments=[
        "--inference_output_dir", inference_output,
        "--key_output_dir", key_output,
        "--final_output_dir", final_merged_output
    ],
    inputs=[inference_output, key_output],
    outputs=[final_merged_output],  # writing final output here
    compute_target=compute_target,
    runconfig=run_config,
    allow_reuse=False
)

pipeline = Pipeline(workspace=ws, steps=[step1, step2, step4])
