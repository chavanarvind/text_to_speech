 Step-by-Step Flow for NLP_LIST_ERP Mapping
ðŸ”¹ STEP 1: Load Reference File
Load NLP_LIST_ERP.csv containing ERP_PART_ID â†” TRU_SPEC_ID pairs.

Clean up spaces and ensure columns are in correct format.

ðŸ”¸ FORCED MAPPING LOGIC (Guaranteed match if both IDs exist)
ðŸ”¹ STEP 2: Extract ERP Records
From erp_full, filter rows that match ERP_PART_IDs in the reference.

ðŸ”¹ STEP 3: Extract TRU Records
From tru_full, filter rows that match TRU_SPEC_IDs in the reference.

ðŸ”¹ STEP 4: Match Forced Pairs
Match ERP and TRU records using:

ERP_MAT_NUM = TRU_MAT_NUM

TRU_SPEC_ID = TRU_SPEC_ID

ðŸ”¹ STEP 5: Label Forced Matches
Tag these records with:

high confidence

forced pair reason

score = 1

ðŸ”¸ NORMAL MAPPING LOGIC (Conditional match)
ðŸ”¹ STEP 6: Match by ID
Join ERP and TRU using ERP_PART_ID and TRU_SPEC_ID from reference.

Check plant and system codes.

ðŸ”¹ STEP 7: Match by Description (Optional)
If text_for_matching_erp and text_for_matching_tru are available:

Match using these cleaned descriptions.

ðŸ”¹ STEP 8: Combine All Normal Matches
Append all valid ID and text-based matches.

Mark them as high confidence with reason as round name.

ðŸ”¹ STEP 9: Deduplicate
Remove duplicate ERPâ€“TRU pairs from forced + normal matches.

ðŸ”¹ STEP 10: Pass Remaining Records
Any unmatched records proceed to the next matching round.
