<!DOCTYPE html>
<html>
<head>
    <title>Text Highlighter</title>
    <style>
        .highlight {
            background-color: yellow;
        }
    </style>
    <script>
        function highlightRange(startIndex, endIndex) {
            const textNodes = getTextNodesUnder(document.body);
            let currentOffset = 0;
            let startNode, startOffset, endNode, endOffset;

            for (let node of textNodes) {
                const length = node.nodeValue.length;
                if (!startNode && currentOffset + length > startIndex) {
                    startNode = node;
                    startOffset = startIndex - currentOffset;
                }
                if (currentOffset + length >= endIndex) {
                    endNode = node;
                    endOffset = endIndex - currentOffset;
                    break;
                }
                currentOffset += length;
            }

            const range = document.createRange();
            range.setStart(startNode, startOffset);
            range.setEnd(endNode, endOffset);

            const highlightSpan = document.createElement('span');
            highlightSpan.className = 'highlight';
            range.surroundContents(highlightSpan);
        }

        function resetHighlights() {
            const highlighted = document.querySelectorAll('.highlight');
            highlighted.forEach(el => {
                const parent = el.parentNode;
                while (el.firstChild) parent.insertBefore(el.firstChild, el);
                parent.removeChild(el);
            });
        }

        function getTextNodesUnder(el) {
            const n, a = [];
            const walk = document.createTreeWalker(el, NodeFilter.SHOW_TEXT, null, false);
            while ((n = walk.nextNode())) a.push(n);
            return a;
        }
    </script>
</head>
<body>
    <h1>KULLANMA TALİMATI</h1>
    <h2>NICORETTE INVISI 10 mg/16 saat transdermal flaster</h2>
    <p>Cilt üzerine uygulanır.</p>
    <p><b>Etkin madde:</b> Her bir banttan 16 saatlik kullanım sırasında 10 mg nikotin salıverilir.</p>
</body>
</html>
