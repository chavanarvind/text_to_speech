if result.reason == speechsdk.ResultReason.Canceled:
    cancellation_details = result.cancellation_details
    print("Speech Recognition canceled:")
    print(f"  Reason: {cancellation_details.reason}")
    if cancellation_details.reason == speechsdk.CancellationReason.Error:
        print(f"  Error Code: {cancellation_details.error_code}")
        print(f"  Error Details: {cancellation_details.error_details}")
        print("Did you set the speech resource key and region correctly?")
