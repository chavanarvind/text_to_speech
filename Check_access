import os
import requests

env_pyzbar_path = r"C:\Users\AChava05\OneDrive - Kenvue\AChava05\video_analysis\qr_env\Lib\site-packages\pyzbar"
os.makedirs(env_pyzbar_path, exist_ok=True)

dll_links = {
    "libzbar-64.dll": "https://github.com/NaturalHistoryMuseum/barcode-reader-dlls/releases/download/0.1/libzbar-64.dll",
    "libiconv.dll": "https://github.com/NaturalHistoryMuseum/barcode-reader-dlls/releases/download/0.1/libiconv.dll"
}

for name, url in dll_links.items():
    print(f"‚¨áÔ∏è Downloading {name}...")
    try:
        r = requests.get(url, verify=False)  # üëà disables SSL check
        with open(os.path.join(env_pyzbar_path, name), "wb") as f:
            f.write(r.content)
        print(f"‚úÖ {name} saved.")
    except Exception as e:
        print(f"‚ùå Failed to download {name}: {e}")
